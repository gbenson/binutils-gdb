1. grep -r cplus_demangle gdb:

   gdb/stabsread.c:             we use cplus_demangle_opname (which is actu
   gdb/stabsread.c:              ret = cplus_demangle_opname (new_fnlist->f
   gdb/stabsread.c:                ret = cplus_demangle_opname (new_fnlist-
   gdb/valops.c:     if (cplus_demangle_opname (t_field_name, dem_opname, D
   gdb/valops.c:     else if (cplus_demangle_opname (t_field_name, dem_opna
   gdb/valops.c:     if (cplus_demangle_opname (t_field_name,
   gdb/valops.c:     else if (cplus_demangle_opname (t_field_name,
   gdb/linespec.c:       if (cplus_demangle_opname (method_name, dem_opname
   gdb/linespec.c:       else if (cplus_demangle_opname (method_name, dem_o
   gdb/cp-support.c:      ret = cplus_demangle_v3_components (mangled_name,
   gdb/gdbtypes.c:      ret = cplus_demangle_opname (TYPE_FN_FIELDLIST_NAME
   gdb/gdbtypes.c: ret = cplus_demangle_opname (TYPE_FN_FIELDLIST_NAME (typ
   gdb/cp-name-parser.y:  i = cplus_demangle_fill_component (ret, d_type, l
   gdb/cp-name-parser.y:  i = cplus_demangle_fill_operator (ret, name, args
   gdb/cp-name-parser.y:  i = cplus_demangle_fill_dtor (ret, kind, name);
   gdb/cp-name-parser.y:  i = cplus_demangle_fill_builtin_type (ret, name);
   gdb/cp-name-parser.y:  i = cplus_demangle_fill_name (ret, name, len);
   gdb/cp-name-parser.y:                     /* Match the whitespacing of c
   gdb/cp-name-parser.y:                     /* Match the whitespacing of c
   gdb/cp-name-parser.y:                     /* Match the whitespacing of c
   gdb/cp-name-parser.y:                     /* Match the whitespacing of c
   gdb/cp-name-parser.y:             /* Match the whitespacing of cplus_dem
   gdb/cp-name-parser.y:   cplus_demangle_print does not, specifically the
   gdb/cp-name-parser.y:  return cplus_demangle_print (DMGL_PARAMS | DMGL_A
   gdb/cp-name-parser.y:  str = cplus_demangle_print (DMGL_PARAMS | DMGL_AN
   gdb/cp-name-parser.y:   str2 = cplus_demangle (buf, DMGL_PARAMS | DMGL_A
   gdb/gnu-v2-abi.c:  demangled_name=cplus_demangle(linkage_name,DMGL_PARAM

2. cplus_demangle                   - REPLACE WITH GDB_DEMANGLE
   cplus_demangle_fill_builtin_type - should be wrapped
   cplus_demangle_fill_component    - should be wrapped
   cplus_demangle_fill_dtor         - should be wrapped
   cplus_demangle_fill_name         - should be wrapped
   cplus_demangle_fill_operator     - should be wrapped
   cplus_demangle_opname            - ok?
   cplus_demangle_print             - should be wrapped
   cplus_demangle_v3_components     - should probably be wrapped

3. gdb/cp-name-parser.y's call to cplus_demangle is just in testing code.

4. pthread_cleanup_push(3), pthread_cleanup_pop(3):

   "Calling longjmp(3) (siglongjmp(3)) produces undefined results
   if any call has been made to pthread_cleanup_push() or
   pthread_cleanup_pop() without the matching call of the pair
   since the jump buffer was filled by setjmp(3) (sigsetjmp(3))."

   So we are safe so long as nobody does this.

5. Backtrace of the PR backtrace/16817 crash:

   #0 __strlen_sse42 at ../sysdeps/x86_64/multiarch/strlen-sse4.S:32
   #1 0x0085739e in work_stuff_copy_to_from at libiberty/cplus-dem.c:1269
   #2 0x0085a21c in iterate_demangle_function at libiberty/cplus-dem.c:2640
   #3 0x0085aa9f in demangle_prefix at libiberty/cplus-dem.c:2880
   #4 0x0085701c in internal_cplus_demangle at libiberty/cplus-dem.c:1181
   #5 0x008566f9 in cplus_demangle at libiberty/cplus-dem.c:873
   #6 0x007979c3 in bfd_demangle at bfd/bfd.c:1885
   #7 0x00732054 in gdb_demangle at gdb/cp-support.c:1513
